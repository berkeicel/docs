---
title: "Debug Tips"
description: "Tips and techniques for debugging RampKit integrations"
---

## Enable Verbose Logging

```typescript
await RampKit.init({
  appId: "YOUR_APP_ID",
  environment: "development",
});
```

All RampKit logs are prefixed with `[RampKit]`:

```
[RampKit] Init: Collecting device info...
[RampKit] Init: userId rk_abc123...
[RampKit] EventManager: Event sent: app_session_started
```

## Inspect Device Context

Check what values your templates will resolve to:

```typescript
import { collectDeviceInfo, buildRampKitContext } from "rampkit-expo-dev";

async function debugContext() {
  const deviceInfo = await collectDeviceInfo();
  console.log("Device Info:", JSON.stringify(deviceInfo, null, 2));
  
  const context = buildRampKitContext(deviceInfo);
  console.log("Template Context:", JSON.stringify(context, null, 2));
}
```

## Debug Onboarding Data

Verify your onboarding configuration loaded correctly:

```typescript
const data = RampKit.getOnboardingData();

if (data) {
  console.log("Onboarding ID:", data.onboardingId);
  console.log("Screen count:", data.screens?.length);
  console.log("Screen IDs:", data.screens?.map(s => s.id));
  console.log("Variables:", data.variables);
} else {
  console.log("No onboarding data loaded!");
}
```

## WebView Console Logging

Add console logging to your onboarding screens:

```javascript
// In your screen's JavaScript
console.log("Screen loaded");
console.log("Variables:", window.__rampkitVariables);
console.log("Context:", window.rampkitContext);

// These logs appear in React Native's console
```

## Debug Variable Flow

Track variable synchronization:

```javascript
// In your onboarding screen
document.addEventListener('rampkit:vars-updated', (event) => {
  console.log("=== VARS UPDATED ===");
  console.log("New values:", JSON.stringify(event.detail, null, 2));
  console.log("====================");
});

// When setting variables
const vars = { selectedGoal: 'fitness' };
console.log("Sending vars:", vars);
window.ReactNativeWebView.postMessage(JSON.stringify({
  type: 'rampkit:variables',
  vars: vars
}));
```

## Test Native APIs

Verify native modules are working:

```typescript
import { Haptics, StoreReview, Notifications, RampKitNative } from "rampkit-expo-dev";

async function testNativeAPIs() {
  // Test haptics
  console.log("Testing haptics...");
  await Haptics.impactAsync("medium");
  console.log("Haptics done");

  // Test store review availability
  const reviewAvailable = await StoreReview.isAvailableAsync();
  console.log("Store review available:", reviewAvailable);

  // Test notification permissions
  const notifStatus = await Notifications.getPermissionsAsync();
  console.log("Notification status:", notifStatus);

  // Test native module directly
  const userId = await RampKitNative.getUserId();
  console.log("User ID from native:", userId);
}
```

## Network Debugging

Check if manifest loads correctly:

```typescript
// The manifest URL format
const manifestUrl = `https://dh1psiwzzzkgr.cloudfront.net/${appId}/manifest.json`;

// Manually fetch to test
fetch(manifestUrl)
  .then(res => res.json())
  .then(data => console.log("Manifest:", data))
  .catch(err => console.error("Manifest error:", err));
```

## Event Tracking Debug

Verify events are being sent:

```typescript
import { eventManager } from "rampkit-expo-dev";

// The event manager logs sent events in development mode
// Look for: [RampKit] EventManager: Event sent: {eventName}

// Manual event tracking test
RampKit.trackEvent("debug_test", {
  timestamp: new Date().toISOString(),
  source: "debug"
});
```

## Session Debug

Check session information:

```typescript
import { getSessionStartTime, getSessionDurationSeconds } from "rampkit-expo-dev";

console.log("Session started:", getSessionStartTime()?.toISOString());
console.log("Session duration:", getSessionDurationSeconds(), "seconds");
console.log("User ID:", RampKit.getUserId());
console.log("Device:", RampKit.getDeviceInfo()?.deviceModel);
```

## Common Debug Patterns

### Check Initialization Order

```typescript
useEffect(() => {
  async function init() {
    console.log("1. Starting init...");
    
    await RampKit.init({ appId: "YOUR_APP_ID" });
    console.log("2. Init complete");
    console.log("   - Initialized:", RampKit.isInitialized());
    console.log("   - User ID:", RampKit.getUserId());
    console.log("   - Has data:", !!RampKit.getOnboardingData());
    
    console.log("3. Showing onboarding...");
    RampKit.showOnboarding();
    console.log("4. showOnboarding called");
  }
  
  init().catch(e => console.error("Init error:", e));
}, []);
```

### Debug WebView Messages

In development, log all WebView messages:

```typescript
// This is internal to the SDK, but you can add similar logging
// in your own WebView components

onMessage={(event) => {
  console.log("WebView message:", event.nativeEvent.data);
}}
```

## React Native Debugger

Use React Native Debugger or Flipper for:
- Network request inspection
- Console log filtering
- Redux state (if using)
- Component inspection

Filter logs with `[RampKit]` to see only SDK-related output.

## Production Debugging

For production issues:

1. **Check analytics** — Events in RampKit dashboard show SDK activity
2. **Add error boundaries** — Catch and report errors
3. **Use Sentry/Bugsnag** — Capture crashes with context

```typescript
try {
  await RampKit.init({ appId: "YOUR_APP_ID" });
} catch (error) {
  Sentry.captureException(error, {
    extra: {
      sdkMethod: "init",
      hasDeviceInfo: !!RampKit.getDeviceInfo()
    }
  });
}
```

<Warning>
Remember to disable verbose logging and remove debug code before production builds.
</Warning>
