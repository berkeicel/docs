---
title: "RampKit.cleanup()"
description: "Clean up SDK resources and reset state"
---

The `cleanup()` method releases SDK resources and resets internal state. Call this when your app terminates, the user logs out, or you need to reinitialize with different settings.

## Signature

```typescript
async function cleanup(): Promise<void>
```

## Usage

```typescript
import { RampKit } from "rampkit-expo-dev";

// On user logout
async function handleLogout() {
  await RampKit.cleanup();
  // Now you can reinitialize with a different user
  await RampKit.init({ appId: "YOUR_APP_ID" });
}
```

## What Cleanup Does

1. **Stops Transaction Observer** — Ends purchase monitoring
2. **Removes App State Listener** — Stops background/foreground tracking
3. **Resets Event Manager** — Clears event tracking state
4. **Resets Session** — Clears session ID and start time
5. **Sets Initialized to False** — SDK needs `init()` again

## App Lifecycle

```typescript
import { useEffect } from "react";
import { AppState } from "react-native";
import { RampKit } from "rampkit-expo-dev";

export default function App() {
  useEffect(() => {
    RampKit.init({ appId: "YOUR_APP_ID" });

    // Optional: cleanup on app unmount
    return () => {
      RampKit.cleanup();
    };
  }, []);

  // ...
}
```

## After Cleanup

After calling `cleanup()`:

- `RampKit.isInitialized()` returns `false`
- `RampKit.getUserId()` returns `null`
- `RampKit.getDeviceInfo()` returns `null`
- Calling `showOnboarding()` will have no effect

To use the SDK again, call `init()`:

```typescript
await RampKit.cleanup();
// SDK is now reset

await RampKit.init({
  appId: "YOUR_APP_ID",
  // New configuration
});
// SDK is active again
```

<Note>
The user ID stored in secure storage (Keychain/SharedPreferences) is **not** deleted by `cleanup()`. The same user ID will be used after reinitialization. This ensures consistent user identity across sessions.
</Note>

## Session Tracking

If you need to explicitly reset session tracking:

```typescript
import { resetSession } from "rampkit-expo-dev";

// Reset just the session (without full cleanup)
resetSession();
```

This clears:
- Session ID
- Session start time

Use this if you want to start a "new session" without reinitializing the SDK.
